[
  {
    "objectID": "Homework5.html",
    "href": "Homework5.html",
    "title": "Homework5",
    "section": "",
    "text": "First, modify the code provided with the download to read in the data from a local file source (your downloaded .csv files) and combine the two data frames. Use local paths as they do in their code.\n\nd1=read.table(\"C:/Users/upnjo/OneDrive/Documents/ST558/HomeWork5/student+performance/student/student-mat.csv\",sep=\";\",header=TRUE)\nd2=read.table(\"C:/Users/upnjo/OneDrive/Documents/ST558/HomeWork5/student+performance/student/student-por.csv\",sep=\";\",header=TRUE)\n\nd3=merge(d1,d2,by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\"reason\",\"nursery\",\"internet\"))\nprint(nrow(d3)) # 382 students\n\n[1] 382\n\n\n\n\n\nSecond, read in and combine the data using functions from the tidyverse. Use an inner_join() on the variables they used in their code. Do you notice any issues? Make a note of the issue\n\n# Load required libraries\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n# Read in the data\nmat_data &lt;- read_delim(\"C:/Users/upnjo/OneDrive/Documents/ST558/HomeWork5/student+performance/student/student-mat.csv\", delim = \";\")\n\nRows: 395 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\npor_data &lt;- read_delim(\"C:/Users/upnjo/OneDrive/Documents/ST558/HomeWork5/student+performance/student/student-por.csv\", delim = \";\")\n\nRows: 649 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# Perform inner join\ncombined_data &lt;- inner_join(\n  mat_data, \n  por_data, \n  by = c(\"school\", \"sex\", \"age\", \"address\", \"famsize\", \"Pstatus\", \"Medu\", \"Fedu\", \n         \"Mjob\", \"Fjob\", \"reason\", \"nursery\", \"internet\")\n)\n\nWarning in inner_join(mat_data, por_data, by = c(\"school\", \"sex\", \"age\", : Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 79 of `x` matches multiple rows in `y`.\nℹ Row 79 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nFrom the warning message looks like there are duplicate values in both data sets\n\n\n\nUse an inner_join() on all variables other than G1, G2, G3, paid, and absences. Use this form of the combined data in further exercises.\n\n# Define the variables to join on (all except G1, G2, G3, paid, and absences)\njoin_vars &lt;- setdiff(names(mat_data), c(\"G1\", \"G2\", \"G3\", \"paid\", \"absences\"))\n\n# Perform inner join\ncombined_data &lt;- inner_join(\n  mat_data, \n  por_data, \n  by = join_vars\n)\n\n# Rename columns to distinguish between math and Portuguese grades\ncombined_data &lt;- combined_data %&gt;%\n  rename(\n    G1_math = G1.x,\n    G2_math = G2.x,\n    G3_math = G3.x,\n    paid_math = paid.x,\n    absences_math = absences.x,\n    G1_por = G1.y,\n    G2_por = G2.y,\n    G3_por = G3.y,\n    paid_por = paid.y,\n    absences_por = absences.y\n  )\n\n# Display the first few rows and structure of the combined data\nprint(head(combined_data))\n\n# A tibble: 6 × 38\n  school sex     age address famsize Pstatus  Medu  Fedu Mjob     Fjob    reason\n  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; \n1 GP     F        18 U       GT3     A           4     4 at_home  teacher course\n2 GP     F        17 U       GT3     T           1     1 at_home  other   course\n3 GP     F        15 U       GT3     T           4     2 health   servic… home  \n4 GP     F        16 U       GT3     T           3     3 other    other   home  \n5 GP     M        16 U       LE3     T           4     3 services other   reput…\n6 GP     M        16 U       LE3     T           2     2 other    other   home  \n# ℹ 27 more variables: guardian &lt;chr&gt;, traveltime &lt;dbl&gt;, studytime &lt;dbl&gt;,\n#   failures &lt;dbl&gt;, schoolsup &lt;chr&gt;, famsup &lt;chr&gt;, paid_math &lt;chr&gt;,\n#   activities &lt;chr&gt;, nursery &lt;chr&gt;, higher &lt;chr&gt;, internet &lt;chr&gt;,\n#   romantic &lt;chr&gt;, famrel &lt;dbl&gt;, freetime &lt;dbl&gt;, goout &lt;dbl&gt;, Dalc &lt;dbl&gt;,\n#   Walc &lt;dbl&gt;, health &lt;dbl&gt;, absences_math &lt;dbl&gt;, G1_math &lt;dbl&gt;,\n#   G2_math &lt;dbl&gt;, G3_math &lt;dbl&gt;, paid_por &lt;chr&gt;, absences_por &lt;dbl&gt;,\n#   G1_por &lt;dbl&gt;, G2_por &lt;dbl&gt;, G3_por &lt;dbl&gt;\n\nprint(str(combined_data))\n\nspc_tbl_ [320 × 38] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ school       : chr [1:320] \"GP\" \"GP\" \"GP\" \"GP\" ...\n $ sex          : chr [1:320] \"F\" \"F\" \"F\" \"F\" ...\n $ age          : num [1:320] 18 17 15 16 16 16 17 15 15 15 ...\n $ address      : chr [1:320] \"U\" \"U\" \"U\" \"U\" ...\n $ famsize      : chr [1:320] \"GT3\" \"GT3\" \"GT3\" \"GT3\" ...\n $ Pstatus      : chr [1:320] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu         : num [1:320] 4 1 4 3 4 2 4 3 3 4 ...\n $ Fedu         : num [1:320] 4 1 2 3 3 2 4 2 4 4 ...\n $ Mjob         : chr [1:320] \"at_home\" \"at_home\" \"health\" \"other\" ...\n $ Fjob         : chr [1:320] \"teacher\" \"other\" \"services\" \"other\" ...\n $ reason       : chr [1:320] \"course\" \"course\" \"home\" \"home\" ...\n $ guardian     : chr [1:320] \"mother\" \"father\" \"mother\" \"father\" ...\n $ traveltime   : num [1:320] 2 1 1 1 1 1 2 1 1 1 ...\n $ studytime    : num [1:320] 2 2 3 2 2 2 2 2 2 2 ...\n $ failures     : num [1:320] 0 0 0 0 0 0 0 0 0 0 ...\n $ schoolsup    : chr [1:320] \"yes\" \"no\" \"no\" \"no\" ...\n $ famsup       : chr [1:320] \"no\" \"yes\" \"yes\" \"yes\" ...\n $ paid_math    : chr [1:320] \"no\" \"no\" \"yes\" \"yes\" ...\n $ activities   : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ nursery      : chr [1:320] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher       : chr [1:320] \"yes\" \"yes\" \"yes\" \"yes\" ...\n $ internet     : chr [1:320] \"no\" \"yes\" \"yes\" \"no\" ...\n $ romantic     : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ famrel       : num [1:320] 4 5 3 4 5 4 4 4 5 3 ...\n $ freetime     : num [1:320] 3 3 2 3 4 4 1 2 5 3 ...\n $ goout        : num [1:320] 4 3 2 2 2 4 4 2 1 3 ...\n $ Dalc         : num [1:320] 1 1 1 1 1 1 1 1 1 1 ...\n $ Walc         : num [1:320] 1 1 1 2 2 1 1 1 1 2 ...\n $ health       : num [1:320] 3 3 5 5 5 3 1 1 5 2 ...\n $ absences_math: num [1:320] 6 4 2 4 10 0 6 0 0 0 ...\n $ G1_math      : num [1:320] 5 5 15 6 15 12 6 16 14 10 ...\n $ G2_math      : num [1:320] 6 5 14 10 15 12 5 18 15 8 ...\n $ G3_math      : num [1:320] 6 6 15 10 15 11 6 19 15 9 ...\n $ paid_por     : chr [1:320] \"no\" \"no\" \"no\" \"no\" ...\n $ absences_por : num [1:320] 4 2 0 0 6 0 2 0 0 2 ...\n $ G1_por       : num [1:320] 0 9 14 11 12 13 10 15 12 14 ...\n $ G2_por       : num [1:320] 11 11 14 13 12 12 13 16 12 14 ...\n $ G3_por       : num [1:320] 11 11 14 13 13 13 13 17 13 14 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   school = col_character(),\n  ..   sex = col_character(),\n  ..   age = col_double(),\n  ..   address = col_character(),\n  ..   famsize = col_character(),\n  ..   Pstatus = col_character(),\n  ..   Medu = col_double(),\n  ..   Fedu = col_double(),\n  ..   Mjob = col_character(),\n  ..   Fjob = col_character(),\n  ..   reason = col_character(),\n  ..   guardian = col_character(),\n  ..   traveltime = col_double(),\n  ..   studytime = col_double(),\n  ..   failures = col_double(),\n  ..   schoolsup = col_character(),\n  ..   famsup = col_character(),\n  ..   paid = col_character(),\n  ..   activities = col_character(),\n  ..   nursery = col_character(),\n  ..   higher = col_character(),\n  ..   internet = col_character(),\n  ..   romantic = col_character(),\n  ..   famrel = col_double(),\n  ..   freetime = col_double(),\n  ..   goout = col_double(),\n  ..   Dalc = col_double(),\n  ..   Walc = col_double(),\n  ..   health = col_double(),\n  ..   absences = col_double(),\n  ..   G1 = col_double(),\n  ..   G2 = col_double(),\n  ..   G3 = col_double()\n  .. )\n - attr(*, \"problems\")=&lt;externalptr&gt; \nNULL\n\n\nNext, for the math data, Portuguese, and combined data, choose four categorical variables you are interested in and convert those into factor variables in each tibble (use the same four variables in each). Use the mutate() function to accomplish this.\nFor this part I am selecting school, sex, address and internet categorical variables as these variables are interesting demographic and environmental factors that could influence students performance.\n\n# Choose four categorical variables to convert to factors\n# We'll use: school, sex, address, and internet\n\n# Convert chosen variables to factors in math data\nmat_data &lt;- mat_data %&gt;%\n  mutate(\n    school = factor(school),\n    sex = factor(sex),\n    address = factor(address),\n    internet = factor(internet)\n  )\n\n# Convert chosen variables to factors in Portuguese data\npor_data &lt;- por_data %&gt;%\n  mutate(\n    school = factor(school),\n    sex = factor(sex),\n    address = factor(address),\n    internet = factor(internet)\n  )\n\n# Convert chosen variables to factors in combined data\ncombined_data &lt;- combined_data %&gt;%\n  mutate(\n    school = factor(school),\n    sex = factor(sex),\n    address = factor(address),\n    internet = factor(internet)\n  )\n\n# Display the structure of each dataset to confirm the changes\nprint(\"Structure of math data:\")\n\n[1] \"Structure of math data:\"\n\nstr(mat_data)\n\ntibble [395 × 33] (S3: tbl_df/tbl/data.frame)\n $ school    : Factor w/ 2 levels \"GP\",\"MS\": 1 1 1 1 1 1 1 1 1 1 ...\n $ sex       : Factor w/ 2 levels \"F\",\"M\": 1 1 1 1 1 2 2 1 2 2 ...\n $ age       : num [1:395] 18 17 15 15 16 16 16 17 15 15 ...\n $ address   : Factor w/ 2 levels \"R\",\"U\": 2 2 2 2 2 2 2 2 2 2 ...\n $ famsize   : chr [1:395] \"GT3\" \"GT3\" \"LE3\" \"GT3\" ...\n $ Pstatus   : chr [1:395] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu      : num [1:395] 4 1 1 4 3 4 2 4 3 3 ...\n $ Fedu      : num [1:395] 4 1 1 2 3 3 2 4 2 4 ...\n $ Mjob      : chr [1:395] \"at_home\" \"at_home\" \"at_home\" \"health\" ...\n $ Fjob      : chr [1:395] \"teacher\" \"other\" \"other\" \"services\" ...\n $ reason    : chr [1:395] \"course\" \"course\" \"other\" \"home\" ...\n $ guardian  : chr [1:395] \"mother\" \"father\" \"mother\" \"mother\" ...\n $ traveltime: num [1:395] 2 1 1 1 1 1 1 2 1 1 ...\n $ studytime : num [1:395] 2 2 2 3 2 2 2 2 2 2 ...\n $ failures  : num [1:395] 0 0 3 0 0 0 0 0 0 0 ...\n $ schoolsup : chr [1:395] \"yes\" \"no\" \"yes\" \"no\" ...\n $ famsup    : chr [1:395] \"no\" \"yes\" \"no\" \"yes\" ...\n $ paid      : chr [1:395] \"no\" \"no\" \"yes\" \"yes\" ...\n $ activities: chr [1:395] \"no\" \"no\" \"no\" \"yes\" ...\n $ nursery   : chr [1:395] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher    : chr [1:395] \"yes\" \"yes\" \"yes\" \"yes\" ...\n $ internet  : Factor w/ 2 levels \"no\",\"yes\": 1 2 2 2 1 2 2 1 2 2 ...\n $ romantic  : chr [1:395] \"no\" \"no\" \"no\" \"yes\" ...\n $ famrel    : num [1:395] 4 5 4 3 4 5 4 4 4 5 ...\n $ freetime  : num [1:395] 3 3 3 2 3 4 4 1 2 5 ...\n $ goout     : num [1:395] 4 3 2 2 2 2 4 4 2 1 ...\n $ Dalc      : num [1:395] 1 1 2 1 1 1 1 1 1 1 ...\n $ Walc      : num [1:395] 1 1 3 1 2 2 1 1 1 1 ...\n $ health    : num [1:395] 3 3 3 5 5 5 3 1 1 5 ...\n $ absences  : num [1:395] 6 4 10 2 4 10 0 6 0 0 ...\n $ G1        : num [1:395] 5 5 7 15 6 15 12 6 16 14 ...\n $ G2        : num [1:395] 6 5 8 14 10 15 12 5 18 15 ...\n $ G3        : num [1:395] 6 6 10 15 10 15 11 6 19 15 ...\n\nprint(\"Structure of Portuguese data:\")\n\n[1] \"Structure of Portuguese data:\"\n\nstr(por_data)\n\ntibble [649 × 33] (S3: tbl_df/tbl/data.frame)\n $ school    : Factor w/ 2 levels \"GP\",\"MS\": 1 1 1 1 1 1 1 1 1 1 ...\n $ sex       : Factor w/ 2 levels \"F\",\"M\": 1 1 1 1 1 2 2 1 2 2 ...\n $ age       : num [1:649] 18 17 15 15 16 16 16 17 15 15 ...\n $ address   : Factor w/ 2 levels \"R\",\"U\": 2 2 2 2 2 2 2 2 2 2 ...\n $ famsize   : chr [1:649] \"GT3\" \"GT3\" \"LE3\" \"GT3\" ...\n $ Pstatus   : chr [1:649] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu      : num [1:649] 4 1 1 4 3 4 2 4 3 3 ...\n $ Fedu      : num [1:649] 4 1 1 2 3 3 2 4 2 4 ...\n $ Mjob      : chr [1:649] \"at_home\" \"at_home\" \"at_home\" \"health\" ...\n $ Fjob      : chr [1:649] \"teacher\" \"other\" \"other\" \"services\" ...\n $ reason    : chr [1:649] \"course\" \"course\" \"other\" \"home\" ...\n $ guardian  : chr [1:649] \"mother\" \"father\" \"mother\" \"mother\" ...\n $ traveltime: num [1:649] 2 1 1 1 1 1 1 2 1 1 ...\n $ studytime : num [1:649] 2 2 2 3 2 2 2 2 2 2 ...\n $ failures  : num [1:649] 0 0 0 0 0 0 0 0 0 0 ...\n $ schoolsup : chr [1:649] \"yes\" \"no\" \"yes\" \"no\" ...\n $ famsup    : chr [1:649] \"no\" \"yes\" \"no\" \"yes\" ...\n $ paid      : chr [1:649] \"no\" \"no\" \"no\" \"no\" ...\n $ activities: chr [1:649] \"no\" \"no\" \"no\" \"yes\" ...\n $ nursery   : chr [1:649] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher    : chr [1:649] \"yes\" \"yes\" \"yes\" \"yes\" ...\n $ internet  : Factor w/ 2 levels \"no\",\"yes\": 1 2 2 2 1 2 2 1 2 2 ...\n $ romantic  : chr [1:649] \"no\" \"no\" \"no\" \"yes\" ...\n $ famrel    : num [1:649] 4 5 4 3 4 5 4 4 4 5 ...\n $ freetime  : num [1:649] 3 3 3 2 3 4 4 1 2 5 ...\n $ goout     : num [1:649] 4 3 2 2 2 2 4 4 2 1 ...\n $ Dalc      : num [1:649] 1 1 2 1 1 1 1 1 1 1 ...\n $ Walc      : num [1:649] 1 1 3 1 2 2 1 1 1 1 ...\n $ health    : num [1:649] 3 3 3 5 5 5 3 1 1 5 ...\n $ absences  : num [1:649] 4 2 6 0 0 6 0 2 0 0 ...\n $ G1        : num [1:649] 0 9 12 14 11 12 13 10 15 12 ...\n $ G2        : num [1:649] 11 11 13 14 13 12 12 13 16 12 ...\n $ G3        : num [1:649] 11 11 12 14 13 13 13 13 17 13 ...\n\nprint(\"Structure of combined data:\")\n\n[1] \"Structure of combined data:\"\n\nstr(combined_data)\n\ntibble [320 × 38] (S3: tbl_df/tbl/data.frame)\n $ school       : Factor w/ 2 levels \"GP\",\"MS\": 1 1 1 1 1 1 1 1 1 1 ...\n $ sex          : Factor w/ 2 levels \"F\",\"M\": 1 1 1 1 2 2 1 2 2 1 ...\n $ age          : num [1:320] 18 17 15 16 16 16 17 15 15 15 ...\n $ address      : Factor w/ 2 levels \"R\",\"U\": 2 2 2 2 2 2 2 2 2 2 ...\n $ famsize      : chr [1:320] \"GT3\" \"GT3\" \"GT3\" \"GT3\" ...\n $ Pstatus      : chr [1:320] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu         : num [1:320] 4 1 4 3 4 2 4 3 3 4 ...\n $ Fedu         : num [1:320] 4 1 2 3 3 2 4 2 4 4 ...\n $ Mjob         : chr [1:320] \"at_home\" \"at_home\" \"health\" \"other\" ...\n $ Fjob         : chr [1:320] \"teacher\" \"other\" \"services\" \"other\" ...\n $ reason       : chr [1:320] \"course\" \"course\" \"home\" \"home\" ...\n $ guardian     : chr [1:320] \"mother\" \"father\" \"mother\" \"father\" ...\n $ traveltime   : num [1:320] 2 1 1 1 1 1 2 1 1 1 ...\n $ studytime    : num [1:320] 2 2 3 2 2 2 2 2 2 2 ...\n $ failures     : num [1:320] 0 0 0 0 0 0 0 0 0 0 ...\n $ schoolsup    : chr [1:320] \"yes\" \"no\" \"no\" \"no\" ...\n $ famsup       : chr [1:320] \"no\" \"yes\" \"yes\" \"yes\" ...\n $ paid_math    : chr [1:320] \"no\" \"no\" \"yes\" \"yes\" ...\n $ activities   : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ nursery      : chr [1:320] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher       : chr [1:320] \"yes\" \"yes\" \"yes\" \"yes\" ...\n $ internet     : Factor w/ 2 levels \"no\",\"yes\": 1 2 2 1 2 2 1 2 2 2 ...\n $ romantic     : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ famrel       : num [1:320] 4 5 3 4 5 4 4 4 5 3 ...\n $ freetime     : num [1:320] 3 3 2 3 4 4 1 2 5 3 ...\n $ goout        : num [1:320] 4 3 2 2 2 4 4 2 1 3 ...\n $ Dalc         : num [1:320] 1 1 1 1 1 1 1 1 1 1 ...\n $ Walc         : num [1:320] 1 1 1 2 2 1 1 1 1 2 ...\n $ health       : num [1:320] 3 3 5 5 5 3 1 1 5 2 ...\n $ absences_math: num [1:320] 6 4 2 4 10 0 6 0 0 0 ...\n $ G1_math      : num [1:320] 5 5 15 6 15 12 6 16 14 10 ...\n $ G2_math      : num [1:320] 6 5 14 10 15 12 5 18 15 8 ...\n $ G3_math      : num [1:320] 6 6 15 10 15 11 6 19 15 9 ...\n $ paid_por     : chr [1:320] \"no\" \"no\" \"no\" \"no\" ...\n $ absences_por : num [1:320] 4 2 0 0 6 0 2 0 0 2 ...\n $ G1_por       : num [1:320] 0 9 14 11 12 13 10 15 12 14 ...\n $ G2_por       : num [1:320] 11 11 14 13 12 12 13 16 12 14 ...\n $ G3_por       : num [1:320] 11 11 14 13 13 13 13 17 13 14 ..."
  },
  {
    "objectID": "Homework5.html#modify-the-data-using-the-code-provided-in-the-zip-file",
    "href": "Homework5.html#modify-the-data-using-the-code-provided-in-the-zip-file",
    "title": "Homework5",
    "section": "",
    "text": "First, modify the code provided with the download to read in the data from a local file source (your downloaded .csv files) and combine the two data frames. Use local paths as they do in their code.\n\nd1=read.table(\"C:/Users/upnjo/OneDrive/Documents/ST558/HomeWork5/student+performance/student/student-mat.csv\",sep=\";\",header=TRUE)\nd2=read.table(\"C:/Users/upnjo/OneDrive/Documents/ST558/HomeWork5/student+performance/student/student-por.csv\",sep=\";\",header=TRUE)\n\nd3=merge(d1,d2,by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\"reason\",\"nursery\",\"internet\"))\nprint(nrow(d3)) # 382 students\n\n[1] 382"
  },
  {
    "objectID": "Homework5.html#read-in-and-combine-the-data-using-functions-from-the-tidyverse",
    "href": "Homework5.html#read-in-and-combine-the-data-using-functions-from-the-tidyverse",
    "title": "Homework5",
    "section": "",
    "text": "Second, read in and combine the data using functions from the tidyverse. Use an inner_join() on the variables they used in their code. Do you notice any issues? Make a note of the issue\n\n# Load required libraries\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n# Read in the data\nmat_data &lt;- read_delim(\"C:/Users/upnjo/OneDrive/Documents/ST558/HomeWork5/student+performance/student/student-mat.csv\", delim = \";\")\n\nRows: 395 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\npor_data &lt;- read_delim(\"C:/Users/upnjo/OneDrive/Documents/ST558/HomeWork5/student+performance/student/student-por.csv\", delim = \";\")\n\nRows: 649 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# Perform inner join\ncombined_data &lt;- inner_join(\n  mat_data, \n  por_data, \n  by = c(\"school\", \"sex\", \"age\", \"address\", \"famsize\", \"Pstatus\", \"Medu\", \"Fedu\", \n         \"Mjob\", \"Fjob\", \"reason\", \"nursery\", \"internet\")\n)\n\nWarning in inner_join(mat_data, por_data, by = c(\"school\", \"sex\", \"age\", : Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 79 of `x` matches multiple rows in `y`.\nℹ Row 79 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nFrom the warning message looks like there are duplicate values in both data sets"
  },
  {
    "objectID": "Homework5.html#the-correct-inner_join",
    "href": "Homework5.html#the-correct-inner_join",
    "title": "Homework5",
    "section": "",
    "text": "Use an inner_join() on all variables other than G1, G2, G3, paid, and absences. Use this form of the combined data in further exercises.\n\n# Define the variables to join on (all except G1, G2, G3, paid, and absences)\njoin_vars &lt;- setdiff(names(mat_data), c(\"G1\", \"G2\", \"G3\", \"paid\", \"absences\"))\n\n# Perform inner join\ncombined_data &lt;- inner_join(\n  mat_data, \n  por_data, \n  by = join_vars\n)\n\n# Rename columns to distinguish between math and Portuguese grades\ncombined_data &lt;- combined_data %&gt;%\n  rename(\n    G1_math = G1.x,\n    G2_math = G2.x,\n    G3_math = G3.x,\n    paid_math = paid.x,\n    absences_math = absences.x,\n    G1_por = G1.y,\n    G2_por = G2.y,\n    G3_por = G3.y,\n    paid_por = paid.y,\n    absences_por = absences.y\n  )\n\n# Display the first few rows and structure of the combined data\nprint(head(combined_data))\n\n# A tibble: 6 × 38\n  school sex     age address famsize Pstatus  Medu  Fedu Mjob     Fjob    reason\n  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; \n1 GP     F        18 U       GT3     A           4     4 at_home  teacher course\n2 GP     F        17 U       GT3     T           1     1 at_home  other   course\n3 GP     F        15 U       GT3     T           4     2 health   servic… home  \n4 GP     F        16 U       GT3     T           3     3 other    other   home  \n5 GP     M        16 U       LE3     T           4     3 services other   reput…\n6 GP     M        16 U       LE3     T           2     2 other    other   home  \n# ℹ 27 more variables: guardian &lt;chr&gt;, traveltime &lt;dbl&gt;, studytime &lt;dbl&gt;,\n#   failures &lt;dbl&gt;, schoolsup &lt;chr&gt;, famsup &lt;chr&gt;, paid_math &lt;chr&gt;,\n#   activities &lt;chr&gt;, nursery &lt;chr&gt;, higher &lt;chr&gt;, internet &lt;chr&gt;,\n#   romantic &lt;chr&gt;, famrel &lt;dbl&gt;, freetime &lt;dbl&gt;, goout &lt;dbl&gt;, Dalc &lt;dbl&gt;,\n#   Walc &lt;dbl&gt;, health &lt;dbl&gt;, absences_math &lt;dbl&gt;, G1_math &lt;dbl&gt;,\n#   G2_math &lt;dbl&gt;, G3_math &lt;dbl&gt;, paid_por &lt;chr&gt;, absences_por &lt;dbl&gt;,\n#   G1_por &lt;dbl&gt;, G2_por &lt;dbl&gt;, G3_por &lt;dbl&gt;\n\nprint(str(combined_data))\n\nspc_tbl_ [320 × 38] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ school       : chr [1:320] \"GP\" \"GP\" \"GP\" \"GP\" ...\n $ sex          : chr [1:320] \"F\" \"F\" \"F\" \"F\" ...\n $ age          : num [1:320] 18 17 15 16 16 16 17 15 15 15 ...\n $ address      : chr [1:320] \"U\" \"U\" \"U\" \"U\" ...\n $ famsize      : chr [1:320] \"GT3\" \"GT3\" \"GT3\" \"GT3\" ...\n $ Pstatus      : chr [1:320] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu         : num [1:320] 4 1 4 3 4 2 4 3 3 4 ...\n $ Fedu         : num [1:320] 4 1 2 3 3 2 4 2 4 4 ...\n $ Mjob         : chr [1:320] \"at_home\" \"at_home\" \"health\" \"other\" ...\n $ Fjob         : chr [1:320] \"teacher\" \"other\" \"services\" \"other\" ...\n $ reason       : chr [1:320] \"course\" \"course\" \"home\" \"home\" ...\n $ guardian     : chr [1:320] \"mother\" \"father\" \"mother\" \"father\" ...\n $ traveltime   : num [1:320] 2 1 1 1 1 1 2 1 1 1 ...\n $ studytime    : num [1:320] 2 2 3 2 2 2 2 2 2 2 ...\n $ failures     : num [1:320] 0 0 0 0 0 0 0 0 0 0 ...\n $ schoolsup    : chr [1:320] \"yes\" \"no\" \"no\" \"no\" ...\n $ famsup       : chr [1:320] \"no\" \"yes\" \"yes\" \"yes\" ...\n $ paid_math    : chr [1:320] \"no\" \"no\" \"yes\" \"yes\" ...\n $ activities   : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ nursery      : chr [1:320] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher       : chr [1:320] \"yes\" \"yes\" \"yes\" \"yes\" ...\n $ internet     : chr [1:320] \"no\" \"yes\" \"yes\" \"no\" ...\n $ romantic     : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ famrel       : num [1:320] 4 5 3 4 5 4 4 4 5 3 ...\n $ freetime     : num [1:320] 3 3 2 3 4 4 1 2 5 3 ...\n $ goout        : num [1:320] 4 3 2 2 2 4 4 2 1 3 ...\n $ Dalc         : num [1:320] 1 1 1 1 1 1 1 1 1 1 ...\n $ Walc         : num [1:320] 1 1 1 2 2 1 1 1 1 2 ...\n $ health       : num [1:320] 3 3 5 5 5 3 1 1 5 2 ...\n $ absences_math: num [1:320] 6 4 2 4 10 0 6 0 0 0 ...\n $ G1_math      : num [1:320] 5 5 15 6 15 12 6 16 14 10 ...\n $ G2_math      : num [1:320] 6 5 14 10 15 12 5 18 15 8 ...\n $ G3_math      : num [1:320] 6 6 15 10 15 11 6 19 15 9 ...\n $ paid_por     : chr [1:320] \"no\" \"no\" \"no\" \"no\" ...\n $ absences_por : num [1:320] 4 2 0 0 6 0 2 0 0 2 ...\n $ G1_por       : num [1:320] 0 9 14 11 12 13 10 15 12 14 ...\n $ G2_por       : num [1:320] 11 11 14 13 12 12 13 16 12 14 ...\n $ G3_por       : num [1:320] 11 11 14 13 13 13 13 17 13 14 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   school = col_character(),\n  ..   sex = col_character(),\n  ..   age = col_double(),\n  ..   address = col_character(),\n  ..   famsize = col_character(),\n  ..   Pstatus = col_character(),\n  ..   Medu = col_double(),\n  ..   Fedu = col_double(),\n  ..   Mjob = col_character(),\n  ..   Fjob = col_character(),\n  ..   reason = col_character(),\n  ..   guardian = col_character(),\n  ..   traveltime = col_double(),\n  ..   studytime = col_double(),\n  ..   failures = col_double(),\n  ..   schoolsup = col_character(),\n  ..   famsup = col_character(),\n  ..   paid = col_character(),\n  ..   activities = col_character(),\n  ..   nursery = col_character(),\n  ..   higher = col_character(),\n  ..   internet = col_character(),\n  ..   romantic = col_character(),\n  ..   famrel = col_double(),\n  ..   freetime = col_double(),\n  ..   goout = col_double(),\n  ..   Dalc = col_double(),\n  ..   Walc = col_double(),\n  ..   health = col_double(),\n  ..   absences = col_double(),\n  ..   G1 = col_double(),\n  ..   G2 = col_double(),\n  ..   G3 = col_double()\n  .. )\n - attr(*, \"problems\")=&lt;externalptr&gt; \nNULL\n\n\nNext, for the math data, Portuguese, and combined data, choose four categorical variables you are interested in and convert those into factor variables in each tibble (use the same four variables in each). Use the mutate() function to accomplish this.\nFor this part I am selecting school, sex, address and internet categorical variables as these variables are interesting demographic and environmental factors that could influence students performance.\n\n# Choose four categorical variables to convert to factors\n# We'll use: school, sex, address, and internet\n\n# Convert chosen variables to factors in math data\nmat_data &lt;- mat_data %&gt;%\n  mutate(\n    school = factor(school),\n    sex = factor(sex),\n    address = factor(address),\n    internet = factor(internet)\n  )\n\n# Convert chosen variables to factors in Portuguese data\npor_data &lt;- por_data %&gt;%\n  mutate(\n    school = factor(school),\n    sex = factor(sex),\n    address = factor(address),\n    internet = factor(internet)\n  )\n\n# Convert chosen variables to factors in combined data\ncombined_data &lt;- combined_data %&gt;%\n  mutate(\n    school = factor(school),\n    sex = factor(sex),\n    address = factor(address),\n    internet = factor(internet)\n  )\n\n# Display the structure of each dataset to confirm the changes\nprint(\"Structure of math data:\")\n\n[1] \"Structure of math data:\"\n\nstr(mat_data)\n\ntibble [395 × 33] (S3: tbl_df/tbl/data.frame)\n $ school    : Factor w/ 2 levels \"GP\",\"MS\": 1 1 1 1 1 1 1 1 1 1 ...\n $ sex       : Factor w/ 2 levels \"F\",\"M\": 1 1 1 1 1 2 2 1 2 2 ...\n $ age       : num [1:395] 18 17 15 15 16 16 16 17 15 15 ...\n $ address   : Factor w/ 2 levels \"R\",\"U\": 2 2 2 2 2 2 2 2 2 2 ...\n $ famsize   : chr [1:395] \"GT3\" \"GT3\" \"LE3\" \"GT3\" ...\n $ Pstatus   : chr [1:395] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu      : num [1:395] 4 1 1 4 3 4 2 4 3 3 ...\n $ Fedu      : num [1:395] 4 1 1 2 3 3 2 4 2 4 ...\n $ Mjob      : chr [1:395] \"at_home\" \"at_home\" \"at_home\" \"health\" ...\n $ Fjob      : chr [1:395] \"teacher\" \"other\" \"other\" \"services\" ...\n $ reason    : chr [1:395] \"course\" \"course\" \"other\" \"home\" ...\n $ guardian  : chr [1:395] \"mother\" \"father\" \"mother\" \"mother\" ...\n $ traveltime: num [1:395] 2 1 1 1 1 1 1 2 1 1 ...\n $ studytime : num [1:395] 2 2 2 3 2 2 2 2 2 2 ...\n $ failures  : num [1:395] 0 0 3 0 0 0 0 0 0 0 ...\n $ schoolsup : chr [1:395] \"yes\" \"no\" \"yes\" \"no\" ...\n $ famsup    : chr [1:395] \"no\" \"yes\" \"no\" \"yes\" ...\n $ paid      : chr [1:395] \"no\" \"no\" \"yes\" \"yes\" ...\n $ activities: chr [1:395] \"no\" \"no\" \"no\" \"yes\" ...\n $ nursery   : chr [1:395] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher    : chr [1:395] \"yes\" \"yes\" \"yes\" \"yes\" ...\n $ internet  : Factor w/ 2 levels \"no\",\"yes\": 1 2 2 2 1 2 2 1 2 2 ...\n $ romantic  : chr [1:395] \"no\" \"no\" \"no\" \"yes\" ...\n $ famrel    : num [1:395] 4 5 4 3 4 5 4 4 4 5 ...\n $ freetime  : num [1:395] 3 3 3 2 3 4 4 1 2 5 ...\n $ goout     : num [1:395] 4 3 2 2 2 2 4 4 2 1 ...\n $ Dalc      : num [1:395] 1 1 2 1 1 1 1 1 1 1 ...\n $ Walc      : num [1:395] 1 1 3 1 2 2 1 1 1 1 ...\n $ health    : num [1:395] 3 3 3 5 5 5 3 1 1 5 ...\n $ absences  : num [1:395] 6 4 10 2 4 10 0 6 0 0 ...\n $ G1        : num [1:395] 5 5 7 15 6 15 12 6 16 14 ...\n $ G2        : num [1:395] 6 5 8 14 10 15 12 5 18 15 ...\n $ G3        : num [1:395] 6 6 10 15 10 15 11 6 19 15 ...\n\nprint(\"Structure of Portuguese data:\")\n\n[1] \"Structure of Portuguese data:\"\n\nstr(por_data)\n\ntibble [649 × 33] (S3: tbl_df/tbl/data.frame)\n $ school    : Factor w/ 2 levels \"GP\",\"MS\": 1 1 1 1 1 1 1 1 1 1 ...\n $ sex       : Factor w/ 2 levels \"F\",\"M\": 1 1 1 1 1 2 2 1 2 2 ...\n $ age       : num [1:649] 18 17 15 15 16 16 16 17 15 15 ...\n $ address   : Factor w/ 2 levels \"R\",\"U\": 2 2 2 2 2 2 2 2 2 2 ...\n $ famsize   : chr [1:649] \"GT3\" \"GT3\" \"LE3\" \"GT3\" ...\n $ Pstatus   : chr [1:649] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu      : num [1:649] 4 1 1 4 3 4 2 4 3 3 ...\n $ Fedu      : num [1:649] 4 1 1 2 3 3 2 4 2 4 ...\n $ Mjob      : chr [1:649] \"at_home\" \"at_home\" \"at_home\" \"health\" ...\n $ Fjob      : chr [1:649] \"teacher\" \"other\" \"other\" \"services\" ...\n $ reason    : chr [1:649] \"course\" \"course\" \"other\" \"home\" ...\n $ guardian  : chr [1:649] \"mother\" \"father\" \"mother\" \"mother\" ...\n $ traveltime: num [1:649] 2 1 1 1 1 1 1 2 1 1 ...\n $ studytime : num [1:649] 2 2 2 3 2 2 2 2 2 2 ...\n $ failures  : num [1:649] 0 0 0 0 0 0 0 0 0 0 ...\n $ schoolsup : chr [1:649] \"yes\" \"no\" \"yes\" \"no\" ...\n $ famsup    : chr [1:649] \"no\" \"yes\" \"no\" \"yes\" ...\n $ paid      : chr [1:649] \"no\" \"no\" \"no\" \"no\" ...\n $ activities: chr [1:649] \"no\" \"no\" \"no\" \"yes\" ...\n $ nursery   : chr [1:649] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher    : chr [1:649] \"yes\" \"yes\" \"yes\" \"yes\" ...\n $ internet  : Factor w/ 2 levels \"no\",\"yes\": 1 2 2 2 1 2 2 1 2 2 ...\n $ romantic  : chr [1:649] \"no\" \"no\" \"no\" \"yes\" ...\n $ famrel    : num [1:649] 4 5 4 3 4 5 4 4 4 5 ...\n $ freetime  : num [1:649] 3 3 3 2 3 4 4 1 2 5 ...\n $ goout     : num [1:649] 4 3 2 2 2 2 4 4 2 1 ...\n $ Dalc      : num [1:649] 1 1 2 1 1 1 1 1 1 1 ...\n $ Walc      : num [1:649] 1 1 3 1 2 2 1 1 1 1 ...\n $ health    : num [1:649] 3 3 3 5 5 5 3 1 1 5 ...\n $ absences  : num [1:649] 4 2 6 0 0 6 0 2 0 0 ...\n $ G1        : num [1:649] 0 9 12 14 11 12 13 10 15 12 ...\n $ G2        : num [1:649] 11 11 13 14 13 12 12 13 16 12 ...\n $ G3        : num [1:649] 11 11 12 14 13 13 13 13 17 13 ...\n\nprint(\"Structure of combined data:\")\n\n[1] \"Structure of combined data:\"\n\nstr(combined_data)\n\ntibble [320 × 38] (S3: tbl_df/tbl/data.frame)\n $ school       : Factor w/ 2 levels \"GP\",\"MS\": 1 1 1 1 1 1 1 1 1 1 ...\n $ sex          : Factor w/ 2 levels \"F\",\"M\": 1 1 1 1 2 2 1 2 2 1 ...\n $ age          : num [1:320] 18 17 15 16 16 16 17 15 15 15 ...\n $ address      : Factor w/ 2 levels \"R\",\"U\": 2 2 2 2 2 2 2 2 2 2 ...\n $ famsize      : chr [1:320] \"GT3\" \"GT3\" \"GT3\" \"GT3\" ...\n $ Pstatus      : chr [1:320] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu         : num [1:320] 4 1 4 3 4 2 4 3 3 4 ...\n $ Fedu         : num [1:320] 4 1 2 3 3 2 4 2 4 4 ...\n $ Mjob         : chr [1:320] \"at_home\" \"at_home\" \"health\" \"other\" ...\n $ Fjob         : chr [1:320] \"teacher\" \"other\" \"services\" \"other\" ...\n $ reason       : chr [1:320] \"course\" \"course\" \"home\" \"home\" ...\n $ guardian     : chr [1:320] \"mother\" \"father\" \"mother\" \"father\" ...\n $ traveltime   : num [1:320] 2 1 1 1 1 1 2 1 1 1 ...\n $ studytime    : num [1:320] 2 2 3 2 2 2 2 2 2 2 ...\n $ failures     : num [1:320] 0 0 0 0 0 0 0 0 0 0 ...\n $ schoolsup    : chr [1:320] \"yes\" \"no\" \"no\" \"no\" ...\n $ famsup       : chr [1:320] \"no\" \"yes\" \"yes\" \"yes\" ...\n $ paid_math    : chr [1:320] \"no\" \"no\" \"yes\" \"yes\" ...\n $ activities   : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ nursery      : chr [1:320] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher       : chr [1:320] \"yes\" \"yes\" \"yes\" \"yes\" ...\n $ internet     : Factor w/ 2 levels \"no\",\"yes\": 1 2 2 1 2 2 1 2 2 2 ...\n $ romantic     : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ famrel       : num [1:320] 4 5 3 4 5 4 4 4 5 3 ...\n $ freetime     : num [1:320] 3 3 2 3 4 4 1 2 5 3 ...\n $ goout        : num [1:320] 4 3 2 2 2 4 4 2 1 3 ...\n $ Dalc         : num [1:320] 1 1 1 1 1 1 1 1 1 1 ...\n $ Walc         : num [1:320] 1 1 1 2 2 1 1 1 1 2 ...\n $ health       : num [1:320] 3 3 5 5 5 3 1 1 5 2 ...\n $ absences_math: num [1:320] 6 4 2 4 10 0 6 0 0 0 ...\n $ G1_math      : num [1:320] 5 5 15 6 15 12 6 16 14 10 ...\n $ G2_math      : num [1:320] 6 5 14 10 15 12 5 18 15 8 ...\n $ G3_math      : num [1:320] 6 6 15 10 15 11 6 19 15 9 ...\n $ paid_por     : chr [1:320] \"no\" \"no\" \"no\" \"no\" ...\n $ absences_por : num [1:320] 4 2 0 0 6 0 2 0 0 2 ...\n $ G1_por       : num [1:320] 0 9 14 11 12 13 10 15 12 14 ...\n $ G2_por       : num [1:320] 11 11 14 13 12 12 13 16 12 14 ...\n $ G3_por       : num [1:320] 11 11 14 13 13 13 13 17 13 14 ..."
  }
]